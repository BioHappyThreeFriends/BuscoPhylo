Index: workflow/Snakefile
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from pathlib import Path\nimport os\n\n#---- setup config ----\nconfigfile: \"config/default.yaml\"\n\n#---- setup paths ----\ncluster_log_dir_path = Path(config[\"cluster_log_dir\"])\ngenome_dir_path = Path(config[\"genome_dir\"])\nlog_dir_path = Path(config[\"log_dir\"])\nbenchmark_dir_path = Path(config[\"benchmark_dir\"])\noutput_dir_path = Path(config[\"output_dir\"])\n\nbusco_dir_path = output_dir_path / config[\"busco_dir\"]\nmerged_sequences_dir_path = busco_dir_path / config[\"merged_sequences_dir\"]\nmafft_dir_path = output_dir_path / config[\"mafft_dir\"]\ngblocks_dir_path = output_dir_path / config[\"gblocks_dir\"]\n\n\nif \"species_list\" not in config:\n    config[\"species_list\"] = [d.name[:-6] for d in genome_dir_path.iterdir() if d.is_file()]\n\n#---- necessary functions ----\ndef expand_template_from_merged_sequences(wildcards, template):\n    checkpoint_output = checkpoints.merged_sequences.get(**wildcards).output[0]\n    sample, = glob_wildcards(os.path.join(checkpoint_output, \"merged_{sample}.fna\"))\n    return expand(str(template), sample=sample)\n\nlocalrules: all\n\nrule all:\n    input:\n        # busco:\n        expand(busco_dir_path / \"{species}/short_summary_{species}.txt\", species=config[\"species_list\"]),\n        busco_dir_path / \"single_copy_busco_sequences.common.ids\",\n        directory(merged_sequences_dir_path),\n\n        # mafft:\n        lambda w: expand_template_from_merged_sequences(w, mafft_dir_path / \"{sample}.fna\"),\n        lambda w: expand_template_from_merged_sequences(w, mafft_dir_path / \"{sample}.faa\"),\n\n        # gblocks:\n        lambda w: expand_template_from_merged_sequences(w, gblocks_dir_path / \"{sample}.fna-gb\"),\n        lambda w: expand_template_from_merged_sequences(w, gblocks_dir_path / \"{sample}.faa-gb\"),\n\n#---- load rules ----\ninclude: \"rules/busco.smk\"\ninclude: \"rules/common_ids.smk\"\ninclude: \"rules/mafft.smk\"\ninclude: \"rules/gblocks.smk\"
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/workflow/Snakefile b/workflow/Snakefile
--- a/workflow/Snakefile	(revision 9451bbf99761cf909a6c97600fe7551b81a8e61e)
+++ b/workflow/Snakefile	(date 1630672959678)
@@ -16,7 +16,6 @@
 mafft_dir_path = output_dir_path / config["mafft_dir"]
 gblocks_dir_path = output_dir_path / config["gblocks_dir"]
 
-
 if "species_list" not in config:
     config["species_list"] = [d.name[:-6] for d in genome_dir_path.iterdir() if d.is_file()]
 
